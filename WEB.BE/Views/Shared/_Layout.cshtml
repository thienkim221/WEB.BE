@using WEB.BE.Models.ViewModels
@using System.Web.Security
@using System.Linq
@using System.Web.Caching

@{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetNoStore();

    var cart = Session["Cart"] as WEB.BE.Models.ViewModels.Cart;

    var pmModel = new PersonalMenuVM
    {
        IsLoggedIn = User.Identity.IsAuthenticated,
        Username = User.Identity.IsAuthenticated ? User.Identity.Name : "",
        CartCount = cart != null && cart.Items.Any() ? cart.Items.Sum(i => i.Quantity) : 0
    };

    ViewBag.pmmodel = pmModel;
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - SHOPPE</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

    <style>

        body {
            background: #f5f5f5 !important;
        }

        /* TOP ORANGE BAR */
        .top-bar {
            background-color: #ee4d2d;
            color: white;
            font-size: 14px;
            padding: 8px 0;
        }

            .top-bar a {
                color: white;
                text-decoration: none;
                margin-right: 12px;
            }

        /* HEADER: Logo + Search + Cart */
        .header-bar {
            background: white;
            padding: 15px 0;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        .search-box input {
            height: 44px;
        }

        .search-btn {
            background: #ee4d2d;
            color: white;
            border: none;
            padding: 0 25px;
            font-size: 18px;
        }

        .cart-icon {
            color: #ee4d2d;
        }

        .body-content {
            margin-top: 25px;
        }
        .footer {
            background: #f5f5f5;
            padding: 40px 0;
            font-size: 14px;
            color: #555;
            margin-top: 40px;
        }

            .footer h4 {
                font-weight: bold;
                font-size: 15px;
                margin-bottom: 15px;
            }

            .footer a {
                color: #555;
                text-decoration: none;
                display: block;
                margin-bottom: 8px;
            }

                .footer a:hover {
                    color: #ee4d2d;
                }

        .footer-bottom {
            text-align: center;
            padding: 20px 0 10px;
            font-size: 14px;
            color: #666;
            border-top: 1px solid #ddd;
            margin-top: 20px;
        }
    </style>

</head>
<body>

    <!-- 🔶 TOP BAR GIỐNG SHOPEE -->
    <div class="top-bar">
        <div class="container d-flex justify-content-between">
            <div>
                <a href="#">Kênh người bán</a>
                <a href="#">Tải ứng dụng</a>
            </div>
            <div>
                <a href="#">Thông báo</a>
                <a href="#">Hỗ trợ</a>

                @if (!pmModel.IsLoggedIn)
                {
                    <a href="/Account/Login">Đăng nhập</a>
                    <a href="/Account/Register">Đăng ký</a>
                }
                else
                {
                    <span>Xin chào, @pmModel.Username</span>
                }
            </div>
        </div>
    </div>

    <!-- 🔶 HEADER SHOPEE -->
    <div class="header-bar">
        <div class="container d-flex align-items-center">

            <!-- Logo -->
            <a href="/Home/Index" class="me-4">
                <img src="https://images.seeklogo.com/logo-png/53/2/shopee-logo-png_seeklogo-530807.png"
                     style="height:40px;" />
            </a>

            <!-- Search box -->
            <div class="flex-grow-1 me-4">
                <form action="/Home/ProductList">
                    <div class="input-group search-box">
                        <input type="text" name="search" class="form-control"
                               placeholder="Tìm sản phẩm, thương hiệu, danh mục...">
                        <button class="search-btn">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Cart -->
            <div>
                <a href="/Cart" class="position-relative">
                    <i class="fa fa-shopping-cart fa-2x cart-icon"></i>

                    @if (pmModel.CartCount > 0)
                    {
                        <span class="badge bg-danger position-absolute top-0 start-100 translate-middle">
                            @pmModel.CartCount
                        </span>
                    }
                </a>
            </div>

        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="container body-content">
        @RenderBody()
        <hr />
        <footer class="footer">

            <div class="container">
                <div class="row">

                    <!-- Dịch vụ khách hàng -->
                    <div class="col-md-3">
                        <h4>DỊCH VỤ KHÁCH HÀNG</h4>
                        <a href="#">Trung Tâm Trợ Giúp Shopee</a>
                        <a href="#">Shopee Blog</a>
                        <a href="#">Shopee Mall</a>
                        <a href="#">Hướng Dẫn Mua Hàng</a>
                        <a href="#">Hướng Dẫn Bán Hàng</a>
                        <a href="#">VÍ ShopeePay</a>
                        <a href="#">Shopee Xu</a>
                        <a href="#">Trả Hàng / Hoàn Tiền</a>
                        <a href="#">Liên Hệ Shopee</a>
                    </div>

                    <!-- Shopee Việt Nam -->
                    <div class="col-md-3">
                        <h4>SHOPEE VIỆT NAM</h4>
                        <a href="#">Về Shopee</a>
                        <a href="#">Tuyển Dụng</a>
                        <a href="#">Điều Khoản Shopee</a>
                        <a href="#">Chính Sách Bảo Mật</a>
                        <a href="#">Kênh Người Bán</a>
                        <a href="#">Flash Sale</a>
                        <a href="#">Liên Hệ Truyền Thông</a>
                    </div>

                    <!-- Thanh toán -->
                    <div class="col-md-3">
                        <h4>THANH TOÁN</h4>
                        <img src="~/Content/images/payment.png" class="img-fluid" alt="">
                        <h4 class="mt-3">ĐƠN VỊ VẬN CHUYỂN</h4>
                        <img src="~/Content/images/shipping.png" class="img-fluid" alt="">
                    </div>

                    <!-- Theo dõi -->
                    <div class="col-md-3">
                        <h4>THEO DÕI SHOP</h4>
                        <a href="#"><i class="fa fa-facebook"></i> Facebook</a>
                        <a href="#"><i class="fa fa-instagram"></i> Instagram</a>
                        <a href="#"><i class="fa fa-linkedin"></i> LinkedIn</a>

                        <h4 class="mt-3">TẢI ỨNG DỤNG</h4>
                        <img src="~/Content/images/shopee.png" class="img-fluid" width="120">
                    </div>

                </div>
            </div>

            <div class="footer-bottom">
                © 2025 Shopee. Tất cả các quyền được bảo lưu.
            </div>

        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    @RenderSection("Scripts", required: false)
</body>
</html>
