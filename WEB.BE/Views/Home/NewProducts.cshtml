
@using PagedList.Mvc;
@model PagedList.IPagedList<WEB.BE.Models.Product>

<h3 class="text-center text-success mb-3">🛍 DANH SÁCH SẢN PHẨM</h3>
<div class="row g-3">
    @* ĐÃ SỬA: Thêm class g-3 để tạo khoảng cách giữa các cột *@
    @if (Model != null && Model.Any())
    {
        foreach (var item in Model)
        {
            // Xử lý đường dẫn hình ảnh
            string imgSrc = !string.IsNullOrEmpty(item.ProductImage)
                ? (item.ProductImage.StartsWith("http") ? item.ProductImage : Url.Content("~/Content/images/" + item.ProductImage))
                : Url.Content("~/Content/images/no-image.png");

            <div class="col-md-3 col-sm-6 mb-4">
                <div class="card h-100 shadow-sm product-card-custom">
                    @* Thêm class tùy chỉnh *@

                    @* Thêm liên kết chi tiết cho ảnh *@
                    <a href="@Url.Action("Details", "Product", new { id = item.ProductID })">
                        <img src="@imgSrc" class="card-img-top product-img-custom" alt="@item.ProductName" />
                    </a>

                    <div class="card-body text-center d-flex flex-column p-2">
                        @* Dùng flex-column để căn chỉnh nội dung *@
                        <h6 class="product-name-custom" title="@item.ProductName">@item.ProductName</h6>
                        <p class="text-danger fw-bold mt-auto mb-1">@item.ProductPrice.ToString("N0") ₫</p> @* Đẩy giá xuống cuối *@
                        <a href="@Url.Action("Details", "Product", new { id = item.ProductID })" class="btn btn-sm btn-outline-dark mt-2">Xem chi tiết</a>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <p class="text-center text-danger w-100">Không có sản phẩm nào được tìm thấy.</p>
    }
</div>

<div class="d-flex justify-content-center mt-4">
    @if (Model != null && Model.PageCount > 1)
    {
        @Html.PagedListPager(Model,
            page => Url.Action("Index", "Home", new { page, searchString = ViewBag.CurrentFilter }),
            PagedListRenderOptions.ClassicPlusFirstAndLast)
    }
</div>

@* THÊM CSS TÙY CHỈNH ĐỂ HIỂN THỊ ĐẸP HƠN *@
<style>
    .product-card-custom {
        transition: transform 0.2s;
        border: 1px solid #eee;
    }

        .product-card-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1) !important;
        }

    .product-img-custom {
        height: 200px;
        object-fit: contain; /* Dùng contain để ảnh không bị cắt */
        padding: 10px;
        background-color: #f8f9fa;
    }

    .product-name-custom {
        font-size: 1em;
        font-weight: 600;
        /* Giới hạn tên sản phẩm 2 dòng */
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        height: 40px;
    }
</style>